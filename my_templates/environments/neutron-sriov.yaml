## A Heat environment that can be used to deploy SR-IOV
resource_registry:
  OS::TripleO::Services::NeutronSriovAgent: ../puppet/services/neutron-sriov-agent.yaml

parameter_defaults:
  NeutronMechanismDrivers: ['openvswitch','sriovnicswitch']

  # Add PciPassthroughFilter to the scheduler default filters
  NovaSchedulerDefaultFilters: ['RetryFilter','AvailabilityZoneFilter','RamFilter','ComputeFilter','ComputeCapabilitiesFilter','ImagePropertiesFilter','ServerGroupAntiAffinityFilter','ServerGroupAffinityFilter','PciPassthroughFilter','NUMATopologyFilter','AggregateInstanceExtraSpecsFilter']
  NovaSchedulerAvailableFilters: ["nova.scheduler.filters.all_filters","nova.scheduler.filters.pci_passthrough_filter.PciPassthroughFilter"]

  NovaVcpuPinSet: ['4-11','24-35','16-23','36-47']

  # Provide the vendorid:productid of the VFs
  NeutronSupportedPCIVendorDevs: ['8086:1528']

  NeutronPhysicalDevMappings: ["phys_sriov_1:ens6f0","phys_sriov_2:ens6f1"]

  # Number of VFs that needs to be configured for a physical interface
  NeutronSriovNumVFs: ["ens6f0:32","ens6f1:32"]

  NovaPCIPassthrough:
    - devname: "ens6f0"
      physical_network: "phys_sriov_1"
    - devname: "ens6f1"
      physical_network: "phys_sriov_2"
